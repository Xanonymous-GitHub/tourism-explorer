var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,l)=>{for(var c in l||(l={}))t.call(l,c)&&n(e,c,l[c]);if(a)for(var c of a(l))r.call(l,c)&&n(e,c,l[c]);return e};import{r as c,f as o,h as s,a as m,s as i,n as u,L as d,u as p,i as f,b as h,w as g,E as w,D as E,c as v}from"./vendor.65b81644.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const c=new URL(e,r);if(self[t].moduleMap[c])return a(self[t].moduleMap[c]);const o=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){l(new Error(`Failed to import: ${e}`)),n(s)},onload(){a(self[t].moduleMap[c]),n(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/assets/");const b=()=>c.createElement(c.Fragment,null,c.createElement("div",null,"Home")),x=async()=>{const e=(new Date).toUTCString();return{Authorization:'hmac username="647eb1e2c74e43ff91828932f1f5915d", algorithm="'+("hmac-"+"SHA-512".replace("-","").toLowerCase())+'", headers="x-date", signature="'+await(async(e,t,a)=>{const r=new TextEncoder,n=r.encode(e),l=r.encode(t),c=await s.compute(n,l,a);return o(c)})("3tPcLuxf21OZmP2eXGQMowPgyX8","x-date: "+e,"SHA-512")+'"',"X-Date":e}};m.defaults.baseURL="https://ptx.transportdata.tw/MOTC/v2/Tourism",m.defaults.headers.common["Content-Type"]="application/json;charset=utf-8";const y=({tourismInfo:e})=>{const{Name:t,Picture:a,Description:r,City:n}=e;return c.createElement("div",{className:"overflow-hidden shadow-lg rounded-lg h-120 w-full md:w-80"},c.createElement(d,{height:160,offset:100,once:!0,classNamePrefix:"background-image:url(https://i.imgur.com/ZaEuYbZ.webp)",placeholder:c.createElement("img",{src:"https://i.imgur.com/ZaEuYbZ.webp",alt:""})},c.createElement("img",{className:"max-h-40 h-40 w-full object-cover",alt:"tourism image",src:(null==a?void 0:a.PictureUrl1)||(null==a?void 0:a.PictureUrl2)||(null==a?void 0:a.PictureUrl3)||"https://i.imgur.com/gMtz026.webp"})),c.createElement("div",{className:"bg-white dark:bg-gray-800 w-full p-4 overflow-scroll h-80 rounded-b-lg"},c.createElement("p",{className:"text-indigo-500 text-md font-medium"},n),c.createElement("p",{className:"text-gray-800 dark:text-white text-xl font-medium mb-2"},t),c.createElement("p",{className:"text-gray-500 dark:text-gray-300 font-light text-md"},r)))},N={rootMargin:"300px",threshold:[0]},S=({fetchData:e,active:t=!1})=>{const a=c.useRef(new IntersectionObserver((async([t])=>{t.intersectionRatio>0&&await e()}),N)),r=c.useRef({});return c.useEffect((()=>{t?a.current.observe(r.current):(a.current.unobserve(r.current),a.current.disconnect())}),[t]),c.createElement("div",{className:"bg-transparent h-px relative",ref:r})},O=()=>{const{city:e}=p(),[t,a]=c.useState(),[r,n]=c.useState(!1),o=c.useRef();o.current=t;const s=async()=>{var t,r;let c;if(c=Boolean(e)?await(async(e,t,a)=>{try{const{data:r}=await m.get(`/ScenicSpot/${e}`,{headers:await x(),params:l(l({},t&&{$top:t}),a&&{$skip:a})});return i(r)}catch(r){return console.warn(r),u}})(e,30,null==(t=o.current)?void 0:t.length):await(async(e,t)=>{try{const{data:a}=await m.get("/ScenicSpot",{headers:await x(),params:l(l({},e&&{$top:e}),t&&{$skip:t})});return i(a)}catch(a){return console.warn(a),u}})(30,null==(r=o.current)?void 0:r.length),f(c))throw new Error("fail to fetch TourismInfo!");h(c.value)?n(!1):a([...o.current?o.current:[],...c.value])};return c.useEffect((()=>{s().then((()=>n(!0)))}),[]),c.createElement("div",{className:"bg-white dark:bg-gray-700 min-h-screen"},c.createElement("div",{className:"card-container"},null==t?void 0:t.map(((e,t)=>c.createElement(y,{key:e.ID+t,tourismInfo:e})))),c.createElement(S,{fetchData:s,active:r}))},P=()=>c.createElement(c.Fragment,null,c.createElement("div",{className:"bg-indigo-900 relative overflow-hidden h-screen"},c.createElement("img",{src:"/image/404.svg",className:"absolute h-full w-full object-cover"}),c.createElement("div",{className:"inset-0 bg-black opacity-25 absolute"}),c.createElement("div",{className:"container mx-auto px-6 md:px-12 relative z-10 flex items-center py-32 xl:py-40"},c.createElement("div",{className:"w-full font-mono flex flex-col items-center relative z-10"},c.createElement("h1",{className:"font-extrabold text-5xl text-center text-white leading-tight mt-4"},"Page not found"),c.createElement("p",{className:"font-extrabold text-8xl my-44 text-white animate-bounce"},"404"))))),j=()=>c.createElement(g,null,c.createElement(w,null,c.createElement(E,{path:"/",element:c.createElement(b,null)}),c.createElement(E,{path:"/ScenicSpot",element:c.createElement(O,null)}),c.createElement(E,{path:"/ScenicSpot/:city",element:c.createElement(O,null)}),c.createElement(E,{path:"*",element:c.createElement(P,null)})));document.addEventListener("DOMContentLoaded",(()=>{v.render(c.createElement(c.StrictMode,null,c.createElement(j,null)),document.getElementById("root"))}));
